
<!-- saved from url=(0050)https://vbarreaud.github.io/JS_TP_1/exo5/exo5.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<title>PLAYER</title>
		<style type="text/css">
			
		</style>
		<script language="Javascript" src="./exo5_files/point.js.download"></script>
		<script> 

		function init(){
			var i=1; 
			var j=1; 
			var aCanvas;
			var audio1;
			var context;
			var currentAngle = Math.PI;
			initCanvas();
			initAudio();

			var currentAngle = Math.PI;
			drawCircle();

			function initCanvas()
			{
				aCanvas=document.getElementById('myCanvas');
				aCanvas.addEventListener("click",updateCanvas);
				context = aCanvas.getContext("2d");
				console.log("initCanvas");

			}

			function initAudio()
			{
				audio1=document.getElementById("audioWav");
				//audio1.addEventListener("timeupdate",updateCanvas);
				audio1.addEventListener("timeupdate",updateCircle);
				console.log("initAudio");
			}

			function drawCircle()
			{
				console.log("drawCircle summoned");
				context.arc(100, 100, 50, Math.PI, currentAngle , false);
				context.stroke();

			}

			function updateCircle()
			{
				currentAngle = Math.PI + (audio1.currentTime/audio1.duration)*Math.PI;
				console.log("update summoned");
				context.clearRect(0, 0, context.canvas.width, context.canvas.height);
				var w = context.canvas.width;
				context.canvas.width = 1;
				context.canvas.width = w;
				context.arc(100, 100, 50, Math.PI, currentAngle , false);
				context.stroke();
			}

			

			function updateCanvas()
			{
				console.log("updateCanvas");
				if(j<10)
				{
					if(i>9){
						i=1;
						j++;
					}
					point1=new Point(20*i,20*j,aCanvas);
					point1.ache();
					i++;
				}
			}

		}
			
		</script>
	</head>
	<body onload="init()">

		<canvas id="myCanvas" width="320" height="200"></canvas>
		
	
		<audio controls id="audioWav">
			<source src="audio/Slow.wav" type="audio/wav">
		</audio>

</body></html>