
<!-- saved from url=(0050)https://vbarreaud.github.io/JS_TP_1/exo5/exo5.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<title>3</title>
		<style type="text/css">	
		</style>

		<script>

			let mclock = 0;
			const objectsInGame = new Array();
			var x = 0;
			var pixPs = 10;
			var waittime=2000;
			var waitbuffer=0;
			var CptInterval;

		function initMain(){

			var mainCanvas;
			var ctx;
			
			initCanvas();
			console.log("initCanvas2");
			


			function initCanvas()
				{
					mainCanvas=document.getElementById('myCanvas');
					mainCanvas.addEventListener("click",updateCanvas);
					updateCanvas();
					CptInterval = setInterval(waiter, 100);
					console.log("initCanvas");

			}
			
		}

		function waiter(){
			//console.log("in waiter");
			if(waitbuffer<waittime){
				waitbuffer+=100;
				//console.log("add 100 to waitbuffer");
			}else{
				clearInterval(CptInterval);
				CptInterval = setInterval(updateCanvas, 100);
			}
		}

		function updateCanvas(){
			
		}

		function resetCanvas(){
			ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
			var w = ctx.canvas.width;
			ctx.canvas.width = 1;
			ctx.canvas.width = w;
		}

		class Square{
				constructor(x,y){
					this.x = x;
					this.y = y;
				}

				clear(){
					this.context.clearRect(this.x, this.y, this.width, this.height);
				}

				update(){
					if((this.hasStarted == false) && (this.delay<wallClock)){
						console.log("starting");
						this.hasStarted=true;
					}


					if( (this.hasStarted == true) && (wallClock%this.speed == 0)){
						if (this.frameIndex < this.numberOfFrames - 1) {	
							this.frameIndex += 1;
						}else {
							this.frameIndex = 0;
						}
					}
				}

				draw(x,y){
					console.log("draw");
					if(x<=this.context.canvas.width - 50){
					resetCanvas();
					this.context.beginPath();
					this.context.rect(x,0,50,50);
					this.context.fillStyle="red";
					this.context.fill();
					x += pixPs;
					}else{
						clearInterval(CptInterval);
					}
				}
			}

		/*	
		class Rectangle {
  					constructor(hauteur, largeur) {
    					this.hauteur = hauteur;
    					this.largeur = largeur;
  					}
  					get area() {
    					return this.calcArea();
  					}

  					calcArea() {
    					return this.largeur * this.hauteur;
  					}
			}

		const carré = new Rectangle(10, 10);
		console.log('LOG REC ' + carré.area);
*/

		const square1 = new Square(0,0);
		objectsInGame.push(square1);
		square1.draw(0,0);


		</script>

	</head>
	<body onload="initMain()">

		<canvas id="myCanvas" width="600" height="600" style="border: 1px solid rgb(140, 107, 202);"></canvas>
	

</body></html>